ximport base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9ydWJ5DQoNCnJlcXVpcmUgJ3VyaScNCnJlcXVpcmUgJ2VyYicNCnJlcXVpcmUgJ2RhdGUnDQpyZXF1aXJlICdqc29uJw0KcmVxdWlyZSAnZGlnZXN0Jw0KcmVxdWlyZSAndGhyZWFkJw0KcmVxdWlyZSAnb3Blbi11cmknDQpyZXF1aXJlICduZXQvaHR0cCcNCnJlcXVpcmUgJ2ZpbGV1dGlscycNCg0KYmVnaW4NCiAgcmVxdWlyZSAndXNlcl9hZ2VudF9wYXJzZXInDQpyZXNjdWUgTG9hZEVycm9yDQogIHJlcXVpcmUgJ3J1YnlnZW1zJw0KICByZXF1aXJlICdydWJ5Z2Vtcy9nZW1fcnVubmVyJw0KICBHZW06OkdlbVJ1bm5lci5uZXcucnVuKFsnaW5zdGFsbCcsJ3VzZXJfYWdlbnRfcGFyc2VyJ10pDQplbmQNCg0KPWJlZ2luDQoNCkF1dGhvciA6IE11YmFzaGFyIGJhbG9jaA0KU2NyaXB0IDogQ1I0Q0sxDQpMaWNlbnNlOiBNSVQgTGljZW5zZQ0KDQpXaGF0c0FwcDogKzkyMzQ3MDMzNjQ3Nw0KRmFjZWJvb2s6IHd3dy5mYWNlYm9vay5jb20vTVVCNFNINFINCkdpdGh1YiAgOiBCQUxPQ0g0MjANCg0KPWVuZA0KDQpjbGFzcyBUaHJlYWRQb29sDQogIGRlZiBpbml0aWFsaXplKHNpemU6KQ0KICAgIEBzaXplID0gc2l6ZQ0KICAgIEBqb2JzID0gUXVldWUubmV3DQogICAgQHBvb2wgPSBBcnJheS5uZXcoc2l6ZSkgZG8NCiAgICAgIFRocmVhZC5uZXcgZG8NCiAgICAgICAgY2F0Y2goOmV4aXQpIGRvDQogICAgICAgICAgbG9vcCBkbw0KICAgICAgICAgICAgam9iLCBhcmdzID0gQGpvYnMucG9wDQogICAgICAgICAgICBqb2IuY2FsbCgqYXJncykNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQoNCiAgZGVmIHNjaGVkdWxlKCphcmdzLCAmYmxvY2spDQogICAgQGpvYnMgPDwgW2Jsb2NrLCBhcmdzXQ0KICBlbmQNCg0KICBkZWYgc2h1dGRvd24NCiAgICBAc2l6ZS50aW1lcyBkbw0KICAgICAgc2NoZWR1bGUgeyB0aHJvdyA6ZXhpdCB9DQogICAgZW5kDQoNCiAgICBAcG9vbC5tYXAoJjpqb2luKQ0KICBlbmQNCmVuZA0KDQoNCm1vZHVsZSBGYWNlYm9vaw0KDQogIGNsYXNzIDw8IHNlbGY7IGF0dHJfYWNjZXNzb3IgOnVzZXJfYWdlbnQ7IGVuZA0KDQogIHNlbGYudXNlcl9hZ2VudCA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOTsgU00tTjk3NlYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83Ni4wLjM4MDkuODkgTW9iaWxlIFNhZmFyaS81MzcuMzYiDQoNCiAgY2xhc3MgTG9naW4NCiAgDQogICAgZGVmIHNlbGYuQ29va2llKGNvb2tpZTosIGdyYXBoOiB0cnVlKQ0KICAgICAgdXJpID0gVVJJKCJodHRwczovL20uZmFjZWJvb2suY29tL2NvbXBvc2VyL29jZWxvdC9hc3luY19sb2FkZXIvP3B1Ymxpc2hlcj1mZWVkI189XyIpDQogICAgICBoZWFkZXJzID0geydIb3N0JzonbS5mYWNlYm9vay5jb20nLCdvcmlnaW4nOidodHRwczovL20uZmFjZWJvb2suY29tJywncmVmZXJlcic6J2h0dHBzOi8vbS5mYWNlYm9vay5jb20vJywnVXNlci1BZ2VudCc6J01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA5OyBTTS1OOTc2VikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc2LjAuMzgwOS44OSBNb2JpbGUgU2FmYXJpLzUzNy4zNicsJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOicxJywnYWNjZXB0LWxhbmd1YWdlJzonaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLCdjYWNoZS1jb250cm9sJzonbWF4LWFnZT0wJywnYWNjZXB0JzondGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCcsJ0Nvb2tpZSc6Y29va2llfQ0KDQogICAgICByZXEgPSBOZXQ6OkhUVFA6OkdldC5uZXcodXJpLGhlYWRlcnMpDQoNCiAgICAgIHJlcyA9IE5ldDo6SFRUUC5zdGFydCh1cmkuaG9zdCx1cmkucG9ydCwgOnVzZV9zc2wgPT4gdHJ1ZSkge3xodHRwfCBodHRwLnJlcXVlc3QocmVxKX0NCiAgICAgIGtoYW5leXNpYSA9IHJlcy5ib2R5Lm1hdGNoKC9FQUFBXHcrLykNCiAgICAgIF8yM18wOF8yMDIxID0gKHJlc1snbG9jYXRpb24nXS50b19zLmluY2x1ZGU/ICgnY2hlY2twb2ludCcpIG9yIGNvb2tpZS5pbmNsdWRlPyAoJ2NoZWNrcG9pbnQnKSBvciByZXNbJ3NldC1jb29raWUnXS50b19zLmluY2x1ZGU/ICgnY2hlY2twb2ludCcpKQ0KICAgICAgcmFobWV0ID0gKCFraGFuZXlzaWEgYW5kICFfMjNfMDhfMjAyMSkNCiAgICAgIGlmIGtoYW5leXNpYSBhbmQgZ3JhcGgNCiAgICAgICAgYSA9IE5ldDo6SFRUUC5nZXQoVVJJKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9bmFtZSxpZCZhY2Nlc3NfdG9rZW49I3traGFuZXlzaWEudG9fc30iKSkNCiAgICAgICAgYiA9IEpTT04ucGFyc2UoYSkNCiAgICAgICAgcmV0dXJuIHsnZXJyb3InPT5mYWxzZSwnY2hlY2twb2ludCc9PmZhbHNlLCduYW1lJz0+YlsnbmFtZSddLCdpZCc9PmJbJ2lkJ10sJ2FjY2Vzc190b2tlbic9PmtoYW5leXNpYS50b19zLCdjb29raWUnPT5jb29raWV9DQogICAgICBlbHNpZiBraGFuZXlzaWEgYW5kICFncmFwaA0KICAgICAgICByZXR1cm4geydlcnJvcic9PmZhbHNlLCdjaGVja3BvaW50Jz0+ZmFsc2UsJ2Nvb2tpZSc9PmNvb2tpZX0NCiAgICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIHsnZXJyb3InPT5yYWhtZXQsJ2NoZWNrcG9pbnQnPT5fMjNfMDhfMjAyMSwnY29va2llJz0+Y29va2llfQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgDQogICAgZGVmIHNlbGYuaG9zdG5hbWUoZW1haWw6LHBhc3M6LGhvc3Q6LGdyYXBoOiB0cnVlKQ0KICAgICAgcmFpc2UgQXJndW1lbnRFcnJvciwgIkludmFsaWQgSG9zdG5hbWUiIGlmICFbJ20uZmFjZWJvb2suY29tJywnZnJlZS5mYWNlYm9vay5jb20nLCdtYmFzaWMuZmFjZWJvb2suY29tJywndG91Y2guZmFjZWJvb2suY29tJ10uaW5jbHVkZT8gKGhvc3QpDQogICAgICBoZWFkZXJzID0geyJIb3N0Ijpob3N0LCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50IjpGYWNlYm9vay51c2VyX2FnZW50LCJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0NCiAgICAgIA0KICAgICAgdXJsID0gVVJJKCJodHRwczovLyN7aG9zdH0vbG9naW4ucGhwIikNCiAgICAgIHBvc3QgPSBOZXQ6OkhUVFA6OlBvc3QubmV3KHVybCxoZWFkZXJzKQ0KICAgICAgDQogICAgICBwb3N0LnNldF9mb3JtX2RhdGEoeydlbWFpbCc9PmVtYWlsLCdwYXNzJz0+cGFzcywnbG9naW4nPT4nc3VibWl0J30pDQogICAgICANCiAgICAgIGxvZ2luID0gTmV0OjpIVFRQLnN0YXJ0KHVybC5ob3N0LHVybC5wb3J0LDp1c2Vfc3NsID0+IHRydWUpIHt8aHR0cHwgaHR0cC5yZXF1ZXN0KHBvc3QpfQ0KICAgICAgY29va2llID0gbG9naW4udG9faGFzaFsnc2V0LWNvb2tpZSddLmNvbGxlY3R7fGVhfGVhWy9eLio/Oy9dfS5qb2luDQogICAgICBzdWNjZXNzID0gKChjb29raWUuaW5jbHVkZT8gKCdjX3VzZXInKSkgb3IgKGxvZ2luWydsb2NhdGlvbiddLnRvX3MuaW5jbHVkZT8gKCdzYXZlLWRldmljZScpKSkNCiAgICAgIGNoZWNrID0gKGNvb2tpZS5pbmNsdWRlPyAoJ2NoZWNrcG9pbnQnKSkgb3IgKGxvZ2luWydsb2NhdGlvbiddLnRvX3MuaW5jbHVkZT8gKCdjaGVja3BvaW50JykpDQogICAgICANCiAgICAgIGlmIHN1Y2Nlc3MgYW5kIGdyYXBoDQogICAgICAgIHNlbGYuQ29va2llKGNvb2tpZTogY29va2llKQ0KICAgICAgZWxzaWYgc3VjY2VzcyBhbmQgIWdyYXBoDQogICAgICAgIHJldHVybiB7J2Vycm9yJz0+ZmFsc2UsJ2NoZWNrcG9pbnQnPT5mYWxzZSwnY29va2llJz0+Y29va2llfQ0KICAgICAgZWxzZQ0KICAgICAgICByZXR1cm4geydlcnJvcic9Pighc3VjY2VzcyBhbmQgIWNoZWNrKSwnY2hlY2twb2ludCc9PmNoZWNrLCdjb29raWUnPT5jb29raWV9DQogICAgICBlbmQNCiAgICBlbmQNCg0KICAgIGRlZiBzZWxmLk0oZW1haWw6LCBwYXNzOiwgZ3JhcGg6IHRydWUpDQogICAgICBzZWxmLmhvc3RuYW1lKGVtYWlsOiBlbWFpbCxwYXNzOiBwYXNzLGhvc3Q6ICdtLmZhY2Vib29rLmNvbScsZ3JhcGg6IGdyYXBoKQ0KICAgIGVuZA0KDQogICAgZGVmIHNlbGYuTWJhc2ljKGVtYWlsOixwYXNzOixncmFwaDogdHJ1ZSkNCiAgICAgIHNlbGYuaG9zdG5hbWUoZW1haWw6IGVtYWlsLHBhc3M6IHBhc3MsIGhvc3Q6ICdtYmFzaWMuZmFjZWJvb2suY29tJyxncmFwaDogZ3JhcGgpDQogICAgZW5kDQogICAgDQogICAgZGVmIHNlbGYuRnJlZShlbWFpbDosIHBhc3M6LCBncmFwaDogdHJ1ZSkNCiAgICAgIHNlbGYuaG9zdG5hbWUoZW1haWw6IGVtYWlsLHBhc3M6IHBhc3MsaG9zdDogJ2ZyZWUuZmFjZWJvb2suY29tJyxncmFwaDogZ3JhcGgpDQogICAgZW5kDQoNCiAgICBkZWYgc2VsZi5Ub3VjaChlbWFpbDoscGFzczosZ3JhcGg6IHRydWUpDQogICAgICBzZWxmLmhvc3RuYW1lKGVtYWlsOiBlbWFpbCxwYXNzOiBwYXNzLGhvc3Q6ICd0b3VjaC5mYWNlYm9vay5jb20nLGdyYXBoOiBncmFwaCkNCiAgICBlbmQNCg0KICAgIGRlZiBzZWxmLkFwaTEoZW1haWw6LHBhc3M6LGdyYXBoOiB0cnVlKQ0KICAgICAgYSA9ICdhcGlfa2V5PTg4MmE4NDkwMzYxZGE5ODcwMmJmOTdhMDIxZGRjMTRkY3JlZGVudGlhbHNfdHlwZT1wYXNzd29yZGVtYWlsPScgKyBlbWFpbCArICdmb3JtYXQ9SlNPTmdlbmVyYXRlX21hY2hpbmVfaWQ9MWdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xbG9jYWxlPWVuX1VTbWV0aG9kPWF1dGgubG9naW5wYXNzd29yZD0nICsgcGFzcyArICdyZXR1cm5fc3NsX3Jlc291cmNlcz0wdj0xLjA2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicNCiAgICAgIGIgPSB7J2FwaV9rZXknPT4gJzg4MmE4NDkwMzYxZGE5ODcwMmJmOTdhMDIxZGRjMTRkJywgJ2NyZWRlbnRpYWxzX3R5cGUnPT4gJ3Bhc3N3b3JkJywgJ2VtYWlsJzogZW1haWwsICdmb3JtYXQnPT4gJ0pTT04nLCAnZ2VuZXJhdGVfbWFjaGluZV9pZCc9PiAnMScsICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnPT4gJzEnLCAnbG9jYWxlJz0+ICdlbl9VUycsICdtZXRob2QnPT4gJ2F1dGgubG9naW4nLCAncGFzc3dvcmQnPT4gcGFzcywgJ3JldHVybl9zc2xfcmVzb3VyY2VzJz0+ICcwJywgJ3YnPT4gJzEuMCd9DQogICAgICBjID0gRGlnZXN0OjpNRDUubmV3DQogICAgICBjLnVwZGF0ZShhKQ0KICAgICAgZCA9IGMuaGV4ZGlnZXN0DQogICAgICBiLnVwZGF0ZSh7J3NpZyc6IGR9KQ0KICAgICAgdXJpID0gVVJJKCJodHRwczovL2FwaS5mYWNlYm9vay5jb20vcmVzdHNlcnZlci5waHAiKQ0KICAgICAgdXJpLnF1ZXJ5ID0gVVJJLmVuY29kZV93d3dfZm9ybShiKQ0KICAgICAgcmVxdWVzdCA9IE5ldDo6SFRUUDo6R2V0Lm5ldyh1cmkpDQogICAgICByZXF1ZXN0WyJVc2VyLUFnZW50Il0gPSBGYWNlYm9vay51c2VyX2FnZW50DQogICAgICByZXNwb25zZSA9IE5ldDo6SFRUUC5zdGFydCh1cmkuaG9zdG5hbWUsIHVyaS5wb3J0LCA6dXNlX3NzbCA9PiAodXJpLnNjaGVtZSA9PSAnaHR0cHMnKSkge3xodHRwfCBodHRwLnJlcXVlc3QocmVxdWVzdCl9DQogICAgICByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpDQogICAgICBlcnJvciA9ICghKHJlcy5rZXkoJ2FjY2Vzc190b2tlbicpKSBhbmQgKCEocmVzLmtleT8gKCdlcnJvcl9tc2cnKSBhbmQgKHJlc1snZXJyb3JfbXNnJ10uaW5jbHVkZT8gKCd3d3cuZmFjZWJvb2suY29tJykgb3IgcmVzWydlcnJvcl9tc2cnXS5pbmNsdWRlPyAoJ1NNUycpKSkpKQ0KICAgICAgY2hlY2sgPSAoKHJlcy5rZXk/ICgnZXJyb3JfbXNnJykpIGFuZCAocmVzWydlcnJvcl9tc2cnXS5pbmNsdWRlPyAoJ3d3dy5mYWNlYm9vay5jb20nKSBvciByZXNbJ2Vycm9yX21zZyddLmluY2x1ZGU/ICgnU01TJykpKQ0KICAgICAgaWYgcmVzLmtleT8gKCdhY2Nlc3NfdG9rZW4nKSBhbmQgZ3JhcGgNCiAgICAgICAgY29va2llID0gcmVzWydzZXNzaW9uX2Nvb2tpZXMnXS5tYXAge3xpfCAiI3tpWyduYW1lJ119PSN7aVsndmFsdWUnXX07In0uam9pbg0KICAgICAgICBhID0gTmV0OjpIVFRQLmdldChVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2ZpZWxkcz1uYW1lLGlkJmFjY2Vzc190b2tlbj0je3Jlc1snYWNjZXNzX3Rva2VuJ119IikpDQogICAgICAgIGIgPSBKU09OLnBhcnNlKGEpDQogICAgICAgIHJldHVybiB7J2Vycm9yJz0+ZmFsc2UsJ2NoZWNrcG9pbnQnPT5mYWxzZSwnbmFtZSc9PmJbJ25hbWUnXSwnaWQnPT5iWydpZCddLCdjb29raWUnPT5jb29raWUsJ3Nlc3Npb25fa2V5Jz0+cmVzWydzZXNzaW9uX2tleSddLCdzZWNyZXQnPT5yZXNbJ3NlY3JldCddLCdhY2Nlc3NfdG9rZW4nPT5yZXNbJ2FjY2Vzc190b2tlbiddLCdtYWNoaW5lX2lkJz0+cmVzWydtYWNoaW5lX2lkJ10sJ3VzZXJfc3RvcmFnZV9rZXknPT5yZXNbJ3VzZXJfc3RvcmFnZV9rZXknXX0NCiAgICAgIGVsc2lmIHJlcy5rZXk/ICgnYWNjZXNzX3Rva2VuJykgYW5kICFncmFwaA0KICAgICAgICBjb29raWUgPSByZXNbJ3Nlc3Npb25fY29va2llcyddLm1hcCB7fGl8ICIje2lbJ25hbWUnXX09I3tpWyd2YWx1ZSddfTsifS5qb2luDQogICAgICAgIHJldHVybiB7J2Vycm9yJz0+ZmFsc2UsJ2NoZWNrcG9pbnQnPT5mYWxzZSwnY29va2llJz0+Y29va2llLCdhY2Nlc3NfdG9rZW4nPT5yZXNbJ2FjY2Vzc190b2tlbiddfQ0KICAgICAgZWxzZQ0KICAgICAgICByZXR1cm4geydlcnJvcic9PmVycm9yLCdjaGVja3BvaW50Jz0+Y2hlY2t9DQogICAgICBlbmQNCiAgICBlbmQNCiAgICANCiAgICBkZWYgc2VsZi5BcGkyKGVtYWlsOiAscGFzczogLGdyYXBoOiB0cnVlKQ0KICAgICAgcGFzcyA9IEVSQjo6VXRpbC51cmxfZW5jb2RlKHBhc3MpIGlmICFwYXNzLmFzY2lpX29ubHk/DQogICAgICB1cmwgPSBbImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0je2VtYWlsfSZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9I3twYXNzfSZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIsImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0zNTA2ODU1MzE3MjglMjU3QzYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyJmZvcm1hdD1KU09OJnNka192ZXJzaW9uPTImZW1haWw9I3tlbWFpbH0mbG9jYWxlPWVuX1VTJnBhc3N3b3JkPSN7cGFzc30mc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiXS5zYW1wbGUNCiAgICAgIHJlcSA9IFVSSS5vcGVuKHVybCwieC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCIgPT4gcmFuZCgyMDAwMDAwMC4wLi4zMDAwMDAwMC4wKS50b19zLCJ4LWZiLXNpbS1obmkiID0+IHJhbmQoMjAwMDAuLjQwMDAwKS50b19zLCJ4LWZiLW5ldC1obmkiID0+IHJhbmQoMjAwMDAuLjQwMDAwKS50b19zLCJ4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSIgPT4gIkVYQ0VMTEVOVCIsICJ4LWZiLWNvbm5lY3Rpb24tdHlwZSIgPT4gImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsICJ1c2VyLWFnZW50IiA9PiBGYWNlYm9vay51c2VyX2FnZW50LCJjb250ZW50LXR5cGUiID0+ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ4LWZiLWh0dHAtZW5naW5lIiA9PiAiTGlnZXIiKQ0KICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXEucmVhZCkNCiAgICAgIGVycm9yID0gKCEocmVzLmtleSgnYWNjZXNzX3Rva2VuJykpIGFuZCAoIShyZXMua2V5PyAoJ2Vycm9yX21zZycpIGFuZCAocmVzWydlcnJvcl9tc2cnXS5pbmNsdWRlPyAoJ3d3dy5mYWNlYm9vay5jb20nKSBvciByZXNbJ2Vycm9yX21zZyddLmluY2x1ZGU/ICgnU01TJykpKSkpDQogICAgICBjaGVjayA9ICgocmVzLmtleT8gKCdlcnJvcl9tc2cnKSkgYW5kIChyZXNbJ2Vycm9yX21zZyddLmluY2x1ZGU/ICgnd3d3LmZhY2Vib29rLmNvbScpIG9yIHJlc1snZXJyb3JfbXNnJ10uaW5jbHVkZT8gKCdTTVMnKSkpDQogICAgICBpZiByZXMua2V5PyAoJ2FjY2Vzc190b2tlbicpIGFuZCBncmFwaA0KICAgICAgICBjb29raWUgPSByZXNbJ3Nlc3Npb25fY29va2llcyddLm1hcCB7fGl8ICIje2lbJ25hbWUnXX09I3tpWyd2YWx1ZSddfTsifS5qb2luDQogICAgICAgIGEgPSBOZXQ6OkhUVFAuZ2V0KFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/ZmllbGRzPW5hbWUsaWQmYWNjZXNzX3Rva2VuPSN7cmVzWydhY2Nlc3NfdG9rZW4nXX0iKSkNCiAgICAgICAgYiA9IEpTT04ucGFyc2UoYSkNCiAgICAgICAgcmV0dXJuIHsnZXJyb3InPT5mYWxzZSwnY2hlY2twb2ludCc9PmZhbHNlLCduYW1lJz0+YlsnbmFtZSddLCdpZCc9PmJbJ2lkJ10sJ2Nvb2tpZSc9PmNvb2tpZSwnc2Vzc2lvbl9rZXknPT5yZXNbJ3Nlc3Npb25fa2V5J10sJ3NlY3JldCc9PnJlc1snc2VjcmV0J10sJ2FjY2Vzc190b2tlbic9PnJlc1snYWNjZXNzX3Rva2VuJ10sJ21hY2hpbmVfaWQnPT5yZXNbJ21hY2hpbmVfaWQnXSwndXNlcl9zdG9yYWdlX2tleSc9PnJlc1sndXNlcl9zdG9yYWdlX2tleSddfQ0KICAgICAgZWxzaWYgcmVzLmtleT8gKCdhY2Nlc3NfdG9rZW4nKSBhbmQgIWdyYXBoDQogICAgICAgIGNvb2tpZSA9IHJlc1snc2Vzc2lvbl9jb29raWVzJ10ubWFwIHt8aXwgIiN7aVsnbmFtZSddfT0je2lbJ3ZhbHVlJ119OyJ9LmpvaW4NCiAgICAgICAgcmV0dXJuIHsnZXJyb3InPT5mYWxzZSwnY2hlY2twb2ludCc9PmZhbHNlLCdjb29raWUnPT5jb29raWUsJ2FjY2Vzc190b2tlbic9PnJlc1snYWNjZXNzX3Rva2VuJ119DQogICAgICBlbHNlDQogICAgICAgIHJldHVybiB7J2Vycm9yJz0+ZXJyb3IsJ2NoZWNrcG9pbnQnPT5jaGVja30NCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIA0KICBlbmQNCg0KICBjbGFzcyBDcmFjayA8IExvZ2luDQogICAgDQogICAgcHJpdmF0ZV9jbGFzc19tZXRob2QgOkNvb2tpZSwgOkFwaTEsIDpBcGkyLCA6TSwgOk1iYXNpYywgOkZyZWUsIDpUb3VjaCwgOmhvc3RuYW1lDQoNCiAgICBhdHRyX3JlYWRlciA6bGlzdGlkLCA6bWV0aG9kLCA6Y3Bfc2F2ZSwgOm9rX3NhdmUNCiAgICBhdHRyX2FjY2Vzc29yIDphdXRvX3Bhc3MsIDp1c2VfdHRsLCA6cGFzc3dvcmQNCg0KICAgIGRlZiBpbml0aWFsaXplKGxpc3RpZDosbWF4X3dvcmtlcnM6IDMwKQ0KICAgICAgQGVtYWlsID0gbGlzdGlkDQogICAgICBAcG9vbCA9IFRocmVhZFBvb2wubmV3KHNpemU6IG1heF93b3JrZXJzKQ0KICAgICAgQHRva2VuID0gRmlsZS5yZWFkKCdsb2dpbi50eHQnKQ0KICAgICAgQGNwX3NhdmUgPSBGaWxlLmpvaW4oJ3Jlc3VsdHMnLCdDUCcsVGltZS5ub3cuc3RyZnRpbWUoIl8lZF8lbV8lWS50eHQiKSkNCiAgICAgIEBva19zYXZlID0gRmlsZS5qb2luKCdyZXN1bHRzJywnT0snLFRpbWUubm93LnN0cmZ0aW1lKCJfJWRfJW1fJVkudHh0IikpDQogICAgICBwdXRzICgiXG5bIE1ldGhkZSBDcmFjayBdICIpDQogICAgICBwdXRzICgiXG5bMV0gTWV0aG9kIExvZ2luIGItYXBpLmZhY2Vib29rLmNvbSIpDQogICAgICBwdXRzICgiWzJdIE1ldGhvZCBMb2dpbiBtLmZhY2Vib29rLmNvbSIpDQogICAgICBwdXRzICgiWzNdIE1ldGhvZCBMb2dpbiBtYmFzaWMuZmFjZWJvb2suY29tIikNCiAgICAgIHB1dHMgKCJbNF0gTWV0aG9kICBMb2dpbiBmcmVlLmZhY2Vib29rLmNvbSIpDQogICAgICBwdXRzICgiWzVdIE1ldGhvZCBMb2dpbiB0b3VjaC5mYWNlYm9vay5jb20iKQ0KICAgICAgDQogICAgICBwcmludCAoIlxuWz9dIENob3NlIDogIikNCiAgICAgIHRvZCA9IFNURElOLmdldHMudG9faQ0KICAgICAgY2FzZSB0b2Q7IHdoZW4gMTsgQG1ldGhvZCA9ICdBcGkyJzsgd2hlbiAyOyBAbWV0aG9kID0gJ00nOyB3aGVuIDM7IEBtZXRob2QgPSAnTWJhc2ljJzsgd2hlbiA0O0BtZXRob2QgPSAnRnJlZSc7ZWxzZTtAbWV0aG9kID0gJ1RvdWNoJztlbmQNCiAgICAgIHByaW50ICgiXG5bP10gUGFzc3dvcmQgQXV0by9NYW51YWwgKGEvbSkgOiAiKQ0KICAgICAgYXV0byA9IFNURElOLmdldHMuY2hvbXAuZG93bmNhc2UNCiAgICAgIGlmIGF1dG8gPT0gJ20nDQogICAgICAgIHB1dHMoIlxuWyFdIEd1bmFrYW4gJywnIFNlYmFnYWkgcGVtaXNhaCwgY29udG9oOiBBbmppbmcsU2F5YW5nIikNCiAgICAgICAgbG9vcCBkbw0KICAgICAgICAgIHByaW50ICgiWytdIE1hc3VrYW4gS2F0YSBTYW5kaSA6ICIpDQogICAgICAgICAgYSA9IFNURElOLmdldHMuY2hvbXAuc3BsaXQoJywnKS51bmlxDQogICAgICAgICAgYiA9IGEubWFwIHt8aXwgaSA9IGkgaWYgaS5sZW5ndGggPj0gNn0uY29tcGFjdA0KICAgICAgICAgIGlmIGEuZW1wdHk/DQogICAgICAgICAgICBwdXRzICgiXG5bIV0gUGFzc3dvcmQgVGlkYWsgQm9sZWggS29zb25nIVxuXG4iKQ0KICAgICAgICAgIGVsc2lmIGIuZW1wdHk/DQogICAgICAgICAgICBwdXRzICgiXG5bIV0gUGFuamFuZyBQYXNzd29yZCBNaW5pbWFsIDYga2FyYWt0ZXJcblxuIikNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICBAcGFzc3dvcmQgPSBiLmNsb25lDQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgQGF1dG9fcGFzcyA9IGZhbHNlDQogICAgICBlbHNlDQogICAgICAgIEBwYXNzd29yZCA9IFsnQW5qaW5nJywnU2F5YW5nJywnS29udG9sJ10NCiAgICAgICAgQGF1dG9fcGFzcyA9IHRydWUNCiAgICAgIGVuZA0KICAgICAgcHJpbnQgKCJcbls/XSBDcmFjayBTdGFydCAoeS9uKSA6ICIpDQogICAgICBAdXNlX3R0bCA9IChTVERJTi5nZXRzLmNob21wLmRvd25jYXNlID09ICd5JykNCiAgICBlbmQNCg0KICAgIGRlZiBzdGFydA0KICAgICAgcHV0cyAoIlxuWyFdIEJhbG9jaCBPSyA6ICN7QG9rX3NhdmV9IikNCiAgICAgIHB1dHMgKCJbIV0gQmFsb2NoIENQIDogI3tAY3Bfc2F2ZX1cblxuIikNCiAgICAgIG9rID0gMA0KICAgICAgY3AgPSAwDQogICAgICBAZW1haWwuZWFjaCBkbyB8dXNyfA0KICAgICAgICBAcG9vbC5zY2hlZHVsZSBkbw0KICAgICAgICAgIHB3ID0gQHBhc3N3b3JkLmNsb25lDQogICAgICAgICAgaWYgQGF1dG9fcGFzcw0KICAgICAgICAgICAgbmV4dCBpZiAhdXNyLmtleT8gKCduYW1lJykNCiAgICAgICAgICAgIG5hbWUgPSB1c3JbJ25hbWUnXS5zcGxpdA0KICAgICAgICAgICAgKG5hbWUubGVuZ3RoID09IDEpID8gcGFzcyA9IFtuYW1lLmZpcnN0ICsgJzEyMycsbmFtZS5maXJzdCArICcxMjM0NScsbmFtZS5maXJzdCArICczMjEnLG5hbWUuZmlyc3QgKyAnNTQzMjEnXSA6IHBhc3MgPSBbbmFtZS5maXJzdCArICcxMjMnLG5hbWUuZmlyc3QgKyAnMTIzNDUnLG5hbWUubGFzdCArICcxMjMnLG5hbWUubGFzdCArICc1NDMyMSddDQogICAgICAgICAgICBwYXNzID0gcGFzcy5tYXAge3xpfCBpID0gaSBpZiBpLmxlbmd0aCA+PSA2fS5jb21wYWN0DQogICAgICAgICAgICBwdyArPSBwYXNzDQogICAgICAgICAgZW5kDQogICAgICAgICAgcHcuZWFjaCBkbyB8cGFzc3d8DQogICAgICAgICAgICBiZWdpbg0KICAgICAgICAgICAgICBsb2dpbiA9IHNlbGYuY2xhc3Muc3VwZXJjbGFzcy5zZW5kKEBtZXRob2QsZW1haWw6IHVzclsnaWQnXSxwYXNzOiBwYXNzdyxncmFwaDogZmFsc2UpDQogICAgICAgICAgICAgIGlmIEB1c2VfdHRsDQogICAgICAgICAgICAgICAgaWYgKCFsb2dpblsnZXJyb3InXSBhbmQgIWxvZ2luWydjaGVja3BvaW50J10pDQogICAgICAgICAgICAgICAgICBvayArPSAxDQogICAgICAgICAgICAgICAgICBib3JuID0gSlNPTi5wYXJzZShOZXQ6OkhUVFAuZ2V0KFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vI3t1c3JbJ2lkJ119P2ZpZWxkcz1iaXJ0aGRheSZhY2Nlc3NfdG9rZW49I3tAdG9rZW59IikpKVsnYmlydGhkYXknXS50b19zLnNwbGl0KCcvJykNCiAgICAgICAgICAgICAgICAgIGJvcm4gPSBib3JuLmluc2VydCgwLGJvcm4uZGVsZXRlX2F0KDEpKQ0KICAgICAgICAgICAgICAgICAgdHRsID0gKCFib3JuLm5pbD8pID8gYm9ybi5tYXB7fGl8IGkucmp1c3QoMiwgJzAnKX0uam9pbignLycpIDogIj8/Lz8/Lz8/Pz8iDQogICAgICAgICAgICAgICAgICBGaWxlLm9wZW4oQG9rX3NhdmUsJ2EnKSB7fGZ8IGYud3JpdGUoIiN7dXNyWydpZCddfSB8ICN7cGFzc3d9IHwgI3t0dGx9XG4iKX0NCiAgICAgICAgICAgICAgICAgIHB1dHMgKCJcMDMzWzkybVtPS10gI3t1c3JbJ2lkJ119IHwgI3twYXNzd30gfCAje3R0bH1cMDMzWzBtIikNCiAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZWxzaWYgbG9naW5bJ2NoZWNrcG9pbnQnXQ0KICAgICAgICAgICAgICAgICAgY3AgKz0gMQ0KICAgICAgICAgICAgICAgICAgYm9ybiA9IEpTT04ucGFyc2UoTmV0OjpIVFRQLmdldChVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyN7dXNyWydpZCddfT9maWVsZHM9YmlydGhkYXkmYWNjZXNzX3Rva2VuPSN7QHRva2VufSIpKSlbJ2JpcnRoZGF5J10udG9fcy5zcGxpdCgnLycpDQogICAgICAgICAgICAgICAgICBib3JuID0gYm9ybi5pbnNlcnQoMCxib3JuLmRlbGV0ZV9hdCgxKSkNCiAgICAgICAgICAgICAgICAgIHR0bCA9ICghYm9ybi5uaWw/KSA/IGJvcm4ubWFwe3xpfCBpLnJqdXN0KDIsICcwJyl9LmpvaW4oJy8nKSA6ICI/Py8/Py8/Pz8/Ig0KICAgICAgICAgICAgICAgICAgRmlsZS5vcGVuKEBjcF9zYXZlLCdhJykge3xmfCBmLndyaXRlKCIje3VzclsnaWQnXX0gfCAje3Bhc3N3fSB8ICN7dHRsfVxuIil9DQogICAgICAgICAgICAgICAgICBwdXRzICgiXDAzM1s5M21bQ1BdICN7dXNyWydpZCddfSB8ICN7cGFzc3d9IHwgI3t0dGx9XDAzM1swbSIpDQogICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgaWYgKCFsb2dpblsnZXJyb3InXSBhbmQgIWxvZ2luWydjaGVja3BvaW50J10pDQogICAgICAgICAgICAgICAgICBvayArPSAxDQogICAgICAgICAgICAgICAgICBGaWxlLm9wZW4oQG9rX3NhdmUsJ2EnKSB7fGZ8IGYud3JpdGUoIiN7dXNyWydpZCddfSB8ICN7cGFzc3d9XG4iKX0NCiAgICAgICAgICAgICAgICAgIHB1dHMgKCJcMDMzWzkybVtPS10gI3t1c3JbJ2lkJ119IHwgI3twYXNzd31cMDMzWzBtIikNCiAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZWxzaWYgbG9naW5bJ2NoZWNrcG9pbnQnXQ0KICAgICAgICAgICAgICAgICAgY3AgKz0gMQ0KICAgICAgICAgICAgICAgICAgRmlsZS5vcGVuKEBjcF9zYXZlLCdhJykge3xmfCBmLndyaXRlKCIje3VzclsnaWQnXX0gfCAje3Bhc3N3fVxuIil9DQogICAgICAgICAgICAgICAgICBwdXRzICgiXDAzM1s5M21bQ1BdICN7dXNyWydpZCddfSB8ICN7cGFzc3d9XDAzM1swbSIpDQogICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHJlc2N1ZSBOb01ldGhvZEVycm9yLE5ldDo6UmVhZFRpbWVvdXQsRXJybm86OkVUSU1FRE9VVCB0aGVuIG5leHQNCiAgICAgICAgICAgIHJlc2N1ZSBTb2NrZXRFcnJvcg0KICAgICAgICAgICAgICBwdXRzICgiXDAzM1s5MW1bIV0gTm8gQ29ubmVjdGlvblwwMzNbMG0iKQ0KICAgICAgICAgICAgICBzbGVlcCAoMC45KQ0KICAgICAgICAgICAgcmVzY3VlIE5ldDo6T3BlblRpbWVvdXQNCiAgICAgICAgICAgICAgcHV0cyAoIlwwMzNbOTNtWyFdIENvbm5lY3Rpb24gdGltZWQgb3V0XDAzM1swbSIpDQogICAgICAgICAgICAgIHNsZWVwKDEpDQogICAgICAgICAgICByZXNjdWUgRXJybm86OkVORVRVTlJFQUNILEVycm5vOjpFQ09OTlJFU0VUDQogICAgICAgICAgICAgIHB1dHMgKCJcMDMzWzkzbVshXSBTbG93IEludGVybmV0IENvbm5lY3Rpb25cMDMzWzBtIikNCiAgICAgICAgICAgICAgc2xlZXAoMC41KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBAcG9vbC5zaHV0ZG93bg0KICAgICAgcHV0cyAoIlxuXDAzM1s5Mm1b4pyTXSBUT1RBTCBPSyA6ICN7b2sudG9fcy5yanVzdCgyLCcwJyl9XDAzM1swbSIpDQogICAgICBwdXRzICgiXDAzM1s5M21bK10gVE9UQUwgQ1AgOiAje2NwLnRvX3Mucmp1c3QoMiwnMCcpfVwwMzNbMG0iKQ0KICAgICAgYWJvcnQoIlxuXDAzM1s5N21bIV0gRmluaXNoZWRcMDMzWzBtXG4iKQ0KICAgIGVuZA0KICBlbmQNCmVuZA0KDQokbG9nbyA9IDw8LUlOSV9MT0dPDQoNCjg4IiJZYiAgICBkYiAgICA4OCAgICAgIGRQIlliICAgZFAiImI4IDg4ICA4OA0KODhfX2RQICAgZFBZYiAgIDg4ICAgICBkUCAgIFliIGRQICAgYCIgODggIDg4DQo4OCIiWWIgIGRQX19ZYiAgODggIC5vIFliICAgZFAgWWIgICAgICA4ODg4OA0KODhvb2RQIGRQIiIiIlliIDg4b29kOCAgWWJvZFAgICBZYm9vZFAgODggIDg4IA0KDQpJTklfTE9HTw0KDQpkZWYgdGlrKHRla3MpDQogIGZvciBpIGluIHRla3MuY2hhcnMgPDwgIlxuIg0KICAgICRzdGRvdXQud3JpdGUoaSkNCiAgICAkc3Rkb3V0LmZsdXNoKCkNCiAgICBzbGVlcCgwLjA5KQ0KICBlbmQNCmVuZA0KDQoNCmRlZiBsb2FkaW5nDQogIGZvciB4IGluIFsiLiAgICIsICIuLiAgIiwgIi4uLiAiLCIuLi4uICIsIlxuIl0NCiAgICAkc3Rkb3V0LndyaXRlKCJcclshXSBQbGVhc2UgV2FpdCIreCkNCiAgICAkc3Rkb3V0LmZsdXNoKCkNCiAgICBzbGVlcCgxKQ0KICBlbmQNCmVuZA0KDQpkZWYgbWFpbg0KICBzeXN0ZW0gKCdjbGVhcicpDQogIHB1dHMgKCRsb2dvKQ0KICBwdXRzICgiW+Kck10gQUNUSVZFIFVTRVIgOiAjeyRuYW1lfSIpDQogIHB1dHMgKCJb4pyTXSBVU0VSIEFHRU5UICA6ICN7JHVhLmRldmljZS5uYW1lfSIpDQogIHB1dHMgKCJb4pyTXSBJUCBBRERSRVNTICA6ICN7JGlwfVxuXG4iKQ0KICBwdXRzICgiWzFdIENyYWNrIEZyb20gUHVibGljIikNCiAgcHV0cyAoIlsyXSBDcmFjayBGcm9tIEZvbGxvd2VycyIpDQogIHB1dHMgKCJbM10gQ3JhY2sgRnJvbSBGb2xsb3dpbmciKQ0KICBwdXRzICgiWzRdIENyYWNrIEZyb20gTGlrZSBQb3N0IikNCiAgcHV0cyAoIls1XSBDcmFjayBGcm9tIGJvdGgsRm9sbG93ZXJzLEZvbGxvd2luZyIpDQogIHB1dHMgKCJbNl0gRmFzdCAgQ3JhY2siKQ0KICBwdXRzICgiWzddIFNldHRpbmdzIFVzZXIgQWdlbnQiKQ0KICBwdXRzICgiWzhdIExvZ291dCAoZnJvbSB0b2tlbikiKQ0KICBwdXRzICgiWzBdIEV4aXRcblxuIikNCiAgDQogIHByaW50ICgiWz9dIENob3NlIDogIikNCiAgcGlsaWggPSBJbnRlZ2VyKFNURElOLmdldHMsZXhjZXB0aW9uOiBmYWxzZSkNCg0KICBjYXNlIHBpbGloDQoNCiAgICB3aGVuIDEsMiwzDQogICAgICBjYXNlIHBpbGloOyB3aGVuIDE7IGFoID0gImZyaWVuZHMiOyB3aGVuIDI7IGFoID0gInN1YnNjcmliZXJzIjsgd2hlbiAzOyBhaCA9ICJzdWJzY3JpYmVkdG8iOyBlbmQNCiAgICAgIHB1dHMgKCJcblshXSBUeXBlICdtZScgdG8gcmV0cmlldmUgaWQgZnJvbSB5b3VyIGFjY291bnQiKQ0KICAgICAgcHJpbnQgKCJcbls/XSBQdWJsaWMgSWQgIDogIikNCiAgICAgIGlkID0gU1RESU4uZ2V0cy5jaG9tcA0KICAgICAgYSA9IE5ldDo6SFRUUC5nZXQoVVJJKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8je2lkfT9maWVsZHM9bmFtZSxpZCwje2FofS5saW1pdCg1MDAwKSYmYWNjZXNzX3Rva2VuPSN7JHRva2VufSIpKQ0KICAgICAgYiA9IEpTT04ucGFyc2UoYSkNCiAgICAgIGlmICFiLmtleT8gKCduYW1lJykNCiAgICAgICAgcHV0cyAoIlshXSBVc2VyIE5vdCBGb3VuZCEiKQ0KICAgICAgZWxzZQ0KICAgICAgICBjID0gKGIua2V5PyAoYWgpKSA/IGJbYWhdWydkYXRhJ10gOiBbXQ0KICAgICAgICBwdXRzICgiW+Kck10gQ3JhY2sgRnJvbSA6ICN7YlsnbmFtZSddfSIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBUb3RhbCBJRCAgIDogI3tjLmxlbmd0aH0iKQ0KICAgICAgICBGYWNlYm9vazo6Q3JhY2submV3KGxpc3RpZDogYykuc3RhcnQNCiAgICAgIGVuZA0KICAgICAgDQogICAgd2hlbiA0DQogICAgICBwcmludCAoIlxuWz9dIFBvc3QgSUQgOiAiKQ0KICAgICAgaWQgPSBTVERJTi5nZXRzLmNob21wKCkNCiAgICAgIGEgPSBOZXQ6OkhUVFAuZ2V0KFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vI3tpZH0/ZmllbGRzPWZyb20mYWNjZXNzX3Rva2VuPSN7JHRva2VufSIpKQ0KICAgICAgYiA9IEpTT04ucGFyc2UoYSkNCiAgICAgIGlmIGIua2V5PyAoJ2Zyb20nKSBvciAhYi5rZXk/ICgnZXJyb3InKQ0KICAgICAgICBwdXRzICgiXG5b4pyTXSBQb3N0ZWQgQnkgOiAje2JbJ2Zyb20nXVsnbmFtZSddfSIpDQogICAgICAgIGEgPSBOZXQ6OkhUVFAuZ2V0KFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vI3tpZH0vbGlrZXM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49I3skdG9rZW59IikpDQogICAgICAgIGIgPSBKU09OLnBhcnNlKGEpDQogICAgICAgIHB1dHMgKCJb4pyTXSBUb3RhbCBJRCAgOiAje2JbJ2RhdGEnXS5sZW5ndGh9XG4iKQ0KICAgICAgICBGYWNlYm9vazo6Q3JhY2submV3KGxpc3RpZDogYlsnZGF0YSddKS5zdGFydA0KICAgICAgZWxzZQ0KICAgICAgICBwdXRzICgiWyFdIFBvc3QgTm90IEZvdW5kISIpDQogICAgICBlbmQNCiAgICB3aGVuIDUNCiAgICAgIHB1dHMgKCJcblshXSBUeXBlICdtZScgdG8gcmV0cmlldmUgaWQgZnJvbSB5b3VyIGFjY291bnRcblxuIikNCiAgICAgIHByaW50ICgiWz9dIFB1YmxpYyBJZCAgOiAiKQ0KICAgICAgaWQgPSBTVERJTi5nZXRzLmNob21wLmRvd25jYXNlDQogICAgICBhID0gTmV0OjpIVFRQLmdldChVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyN7aWR9P2ZpZWxkcz1uYW1lLGZyaWVuZHMubGltaXQoNTAwMCksc3Vic2NyaWJlcnMubGltaXQoNTAwMCksc3Vic2NyaWJlZHRvLmxpbWl0KDUwMDApJmFjY2Vzc190b2tlbj0jeyR0b2tlbn0iKSkNCiAgICAgIGIgPSBKU09OLnBhcnNlKGEpDQogICAgICBpZiAhYi5rZXk/ICgnbmFtZScpDQogICAgICAgIHB1dHMgKCJbIV0gVXNlciBOb3QgRm91bmQhIikNCiAgICAgIGVsc2UNCiAgICAgICAgdGVtYW4gPSAoYi5rZXk/ICgnZnJpZW5kcycpKSA/IGJbJ2ZyaWVuZHMnXVsnZGF0YSddIDogW10NCiAgICAgICAgcGVuZ2lrdXQgPSAoYi5rZXk/ICgnc3Vic2NyaWJlcnMnKSkgPyBiWydzdWJzY3JpYmVycyddWydkYXRhJ10gOiBbXQ0KICAgICAgICBtZW5naWt1dGkgPSAoYi5rZXk/ICgnc3Vic2NyaWJlZHRvJykpID8gYlsnc3Vic2NyaWJlZHRvJ11bJ2RhdGEnXSA6IFtdDQogICAgICAgIHRvdGFsID0gKHRlbWFuICsgcGVuZ2lrdXQgKyBtZW5naWt1dGkpLnVuaXENCiAgICAgICAgcHV0cyAoIlvinJNdIENyYWNrIEZlb20gOiAje2JbJ25hbWUnXX0iKQ0KICAgICAgICBwdXRzICgiW+Kck10gVG90YWwgSUQgICA6ICN7dG90YWwubGVuZ3RofSIpDQogICAgICAgIEZhY2Vib29rOjpDcmFjay5uZXcobGlzdGlkOiB0b3RhbCkuc3RhcnQNCiAgICAgIGVuZA0KICAgIA0KICAgIHdoZW4gNg0KICAgICAgYSA9IFtdDQogICAgICBiID0gW10NCiAgICAgIGNwID0gRGlyW0ZpbGUuam9pbigncmVzdWx0cycsJ0NQJywnKicpXS5zZWxlY3R7fGZ8IEZpbGUuZmlsZT8gKGYpfS5tYXB7IHxmfCBGaWxlLmV4cGFuZF9wYXRoIGYgfQ0KICAgICAgb2sgPSBEaXJbRmlsZS5qb2luKCdyZXN1bHRzJywnT0snLCcqJyldLnNlbGVjdHt8ZnwgRmlsZS5maWxlPyAoZil9Lm1hcHsgfGZ8IEZpbGUuZXhwYW5kX3BhdGggZiB9DQogICAgICBwdXRzICgiXG5bMV0gQmFsb2NoIDQyMCBPSyAoI3tvay5sZW5ndGh9KSIpDQogICAgICBwdXRzICgiWzJdIEJhbG9jaCA0MjAgQ1AgKCN7Y3AubGVuZ3RofSkiKQ0KICAgICAgcHV0cyAoIlswXSBLZW1iYWxpXG5cbiIpDQogICAgICBwcmludCAoIls/XSBQaWxpaCA6ICIpDQogICAgICBuYW9uID0gU1RESU4uZ2V0cy50b19pDQogICAgICBpZiBuYW9uID09IDEgYW5kICFvay5lbXB0eT8NCiAgICAgICAgZm9yIGkgaW4gb2sNCiAgICAgICAgICBGaWxlLnJlYWRsaW5lcyhpLCBjaG9tcDogdHJ1ZSkuZWFjaCBkbyB8ZGF0YXwNCiAgICAgICAgICAgIHNoaXQgPSBkYXRhLnNwbGl0KCd8JykNCiAgICAgICAgICAgIGlmICFzaGl0WzJdLm5pbD8gYW5kIHNoaXRbMl0uaW5jbHVkZT8gKCI/Py8/Py8/Pz8/Iikgb3Igc2hpdC5sZW5ndGggPT0gMg0KICAgICAgICAgICAgICBhIDw8ICIje3NoaXRbMF19IHwgI3tzaGl0WzFdfSINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgYiA8PCBkYXRhDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHB1dHMgKCJcblshXSBIYXNpbCBDcmFjayBUYW5wYSBUYW5nZ2FsIExhaGlyXG5cbiIpDQogICAgICAgIGEudW5pcS5lYWNoIHt8aXwgcHV0cyAoIlwwMzNbOTJtW09LXSAje2l9XDAzM1swbSIpfQ0KICAgICAgICBwdXRzICgiXG5bIV0gSGFzaWwgQ3JhY2sgRGVuZ2FuIFRhbmdnYWwgTGFoaXJcblxuIikNCiAgICAgICAgYi51bmlxLmVhY2gge3xpfCBwdXRzICgiXDAzM1s5Mm1bT0tdICN7aX1cMDMzWzBtIil9DQogICAgICBlbHNpZiBuYW9uID09IDEgYW5kIG9rLmVtcHR5Pw0KICAgICAgICBwdXRzICgiXG5bIV0gQW5kYSBUaWRhayBNZW1pbGlraSBIYXNpbCBPSyIpDQogICAgICBlbHNpZiBuYW9uID09IDIgYW5kICFjcC5lbXB0eT8NCiAgICAgICAgZm9yIGkgaW4gY3ANCiAgICAgICAgICBGaWxlLnJlYWRsaW5lcyhpLCBjaG9tcDogdHJ1ZSkuZWFjaCBkbyB8ZGF0YXwNCiAgICAgICAgICAgIHNoaXQgPSBkYXRhLnNwbGl0KCd8JykNCiAgICAgICAgICAgIGlmICFzaGl0WzJdLm5pbD8gYW5kIHNoaXRbMl0uaW5jbHVkZT8gKCI/Py8/Py8/Pz8/Iikgb3Igc2hpdC5sZW5ndGggPT0gMg0KICAgICAgICAgICAgICBhIDw8ICIje3NoaXRbMF19IHwgI3tzaGl0WzFdfSINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgYiA8PCBkYXRhDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHB1dHMgKCJcblshXSBIYXNpbCBDcmFjayBUYW5wYSBUYW5nZ2FsIExhaGlyXG5cbiIpDQogICAgICAgIGEudW5pcS5lYWNoIHt8aXwgcHV0cyAoIlwwMzNbOTNtW0NQXSAje2l9XDAzM1swbSIpfQ0KICAgICAgICBwdXRzICgiXG5bIV0gSGFzaWwgQ3JhY2sgRGVuZ2FuIFRhbmdnYWwgTGFoaXJcblxuIikNCiAgICAgICAgYi51bmlxLmVhY2gge3xpfCBwdXRzICgiXDAzM1s5M21bQ1BdICN7aX1cMDMzWzBtIil9DQogICAgICBlbHNpZiBuYW9uID09IDIgYW5kIGNwLmVtcHR5Pw0KICAgICAgICBwdXRzICgiXG5bIV0gQW5kYSBUaWRhayBNZW1pbGlraSBIYXNpbCBDUCIpDQogICAgICBlbHNlDQogICAgICAgIG1haW4oKQ0KICAgICAgZW5kDQogICAgd2hlbiA3DQogICAgICBwdXRzICgiXG5bMV0gQ2hlY2sgVXNlciBBZ2VudCIpDQogICAgICBwdXRzICgiWzJdIEdhbnRpIFVzZXIgQWdlbnQiKQ0KICAgICAgcHV0cyAoIlswXSBLZW1iYWxpXG5cbiIpDQogICAgICBwcmludCAoIls/XSBQaWxpaCA6ICIpDQogICAgICBuY2hhID0gU1RESU4uZ2V0cy50b19pDQogICAgICBpZiAobmNoYSA9PSAxKQ0KICAgICAgICBwdXRzICgiXG5bIV0gT1MgSW5mb3JtYXRpb25cblxuIikNCiAgICAgICAgcHV0cyAoIlvinJNdIE9TIE5hbWUgICAgOiAjeyR1YS5vcy5uYW1lfSIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBPUyBGYW1pbHkgIDogI3skdWEub3MuZmFtaWx5fSIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBPUyBWZXJzaW9uIDogI3skdWEub3MudmVyc2lvbn1cblxuIikNCiAgICAgICAgcHV0cyAoIlshXSBEZXZpY2UgSW5mb3JtYXRpb25cblxuIikNCiAgICAgICAgcHV0cyAoIlvinJNdIERldmljZSBOYW1lICAgOiAjeyR1YS5kZXZpY2UubmFtZX0iKQ0KICAgICAgICBwdXRzICgiW+Kck10gRGV2aWNlIEZhbWlseSA6ICN7JHVhLmRldmljZS5mYW1pbHl9IikNCiAgICAgICAgcHV0cyAoIlvinJNdIERldmljZSBNb2RlbCAgOiAjeyR1YS5kZXZpY2UubW9kZWx9IikNCiAgICAgICAgcHV0cyAoIlvinJNdIERldmljZSBCcmFuZCAgOiAjeyR1YS5kZXZpY2UuYnJhbmR9XG5cblxuIikNCiAgICAgICAgcHV0cyAoIlvinJNdIFVzZXItQWdlbnQgOiAje0ZhY2Vib29rLnVzZXJfYWdlbnR9XG5cbiIpDQogICAgICAgIHByaW50ICgiW0JBQ0tdICIpIDsgZ2V0cw0KICAgICAgICBtYWluKCkNCiAgICAgIGVsc2lmIChuY2hhID09IDIpDQogICAgICAgIGxvb3AgZG8NCiAgICAgICAgICBwcmludCAoIlxuWz9dIE1hc3Vra2FuIFVzZXItQWdlbnQgOiAiKQ0KICAgICAgICAgIEBhZ2VudCA9IFNURElOLmdldHMuY2hvbXANCiAgICAgICAgICBicmVhayBpZiBAYWdlbnQubGVuZ3RoID4gNQ0KICAgICAgICAgIHB1dHMgKCJcblshXSBJbnZhbGlkIFVzZXIgQWdlbnQiKQ0KICAgICAgICBlbmQNCiAgICAgICAgdWFoID0gVXNlckFnZW50UGFyc2VyLnBhcnNlKEBhZ2VudCkNCiAgICAgICAgcHV0cyAoIlxuWyFdIE9TIEluZm9ybWF0aW9uXG5cbiIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBPUyBOYW1lICAgIDogI3t1YWgub3MubmFtZX0iKQ0KICAgICAgICBwdXRzICgiW+Kck10gT1MgRmFtaWx5ICA6ICN7dWFoLm9zLmZhbWlseX0iKQ0KICAgICAgICBwdXRzICgiW+Kck10gT1MgVmVyc2lvbiA6ICN7dWFoLm9zLnZlcnNpb259XG5cbiIpDQogICAgICAgIHB1dHMgKCJbIV0gRGV2aWNlIEluZm9ybWF0aW9uXG5cbiIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBEZXZpY2UgTmFtZSAgIDogI3t1YWguZGV2aWNlLm5hbWV9IikNCiAgICAgICAgcHV0cyAoIlvinJNdIERldmljZSBGYW1pbHkgOiAje3VhaC5kZXZpY2UuZmFtaWx5fSIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBEZXZpY2UgTW9kZWwgIDogI3t1YWguZGV2aWNlLm1vZGVsfSIpDQogICAgICAgIHB1dHMgKCJb4pyTXSBEZXZpY2UgQnJhbmQgIDogI3t1YWguZGV2aWNlLmJyYW5kfVxuXG5cbiIpDQogICAgICAgIHByaW50ICgiWz9dIEdhbnRpIFVzZXItQWdlbnQoeS9uKSA6ICIpDQogICAgICAgIGdhbnRpID0gU1RESU4uZ2V0cy5jaG9tcC5kb3duY2FzZSA9PSAneScNCiAgICAgICAgaWYgZ2FudGkNCiAgICAgICAgICAkdWEgPSB1YWguY2xvbmUNCiAgICAgICAgICBGYWNlYm9vay51c2VyX2FnZW50ID0gQGFnZW50DQogICAgICAgICAgRmlsZS5vcGVuKCcudWEnLCd3Jykge3xmfCBmLndyaXRlKEBhZ2VudCl9DQogICAgICAgICAgcHV0cyAoIlxuW+Kck10gQmVyaGFzaWwgTWVuZ2dhbnRpIFVzZXItQWdlbnQiKQ0KICAgICAgICBlbmQNCiAgICAgICAgcHJpbnQgKCJcblxuW0JBQ0tdICIpDQogICAgICAgIGdldHMgOyBtYWluKCkNCiAgICAgIGVsc2UNCiAgICAgICAgbWFpbigpDQogICAgICBlbmQNCiAgICB3aGVuIDgNCiAgICAgIHByaW50ICgiXG5bP10gRG8geW91IHdhbnQgdG8gY29udGludWUgKHkvbikgOiAiKQ0KICAgICAgc3VyZSA9IFNURElOLmdldHMuY2hvbXAuZG93bmNhc2UgPT0gJ3knDQogICAgICBpZiBzdXJlDQoJYmVnaW4NCiAgICAgICAgICBGaWxlLmRlbGV0ZSAoJ2xvZ2luLnR4dCcpDQogICAgICAgICAgcHV0cyAoIlvinJNdIFN1Y2Nlc3NmdWxseSBEZWxldGUgbG9naW4udHh0IEZpbGUiKQ0KICAgICAgICByZXNjdWUNCiAgICAgICAgICBwdXRzICgiWyFdIEZhaWxlZCB0byBEZWxldGUgbG9naW4udHh0IEZpbGUiKQ0KICAgICAgICBlbnN1cmUNCgkgIGFib3J0KCJbIV0gRXhpdCIpDQoJZW5kDQogICAgICBlbHNlDQogICAgICAgIG1haW4oKQ0KICAgICAgZW5kDQogICAgd2hlbiAwDQogICAgICBhYm9ydCgiWyFdIEV4aXQiKQ0KICAgIGVsc2UNCiAgICAgIHB1dHMgKCJbIV0gSW52YWxpZCBJbnB1dCEiKQ0KICAgICAgc2xlZXAoMC45KQ0KICAgICAgbWFpbigpDQogIGVuZA0KZW5kDQoNCmRlZiBMb2dpbkFrdW4NCiAgYmVnaW4NCiAgICBzeXN0ZW0gKCdjbGVhcicpDQogICAgcHV0cyAoJGxvZ28pDQogICAgcHV0cyAoIlsxXSBMb2dpbiBWaWEgRW1haWwvcGFzc3dvcmQgKGFwaSkiKQ0KICAgIHB1dHMgKCJbMl0gTG9naW4gVmlhIEVtYWlsL3Bhc3N3b3JkIChtYmFzaWMpIikNCiAgICBwdXRzICgiWzNdIExvZ2luIFZpYSBBY2Nlc3MgVG9rZW4iKQ0KICAgIHB1dHMgKCJbNF0gTG9naW4gVmlhIENvb2tpZXMiKQ0KICAgIHB1dHMgKCJbMF0gRXhpdCIpDQoNCiAgICBwcmludCAoIlxuWz9dIENob3NlIDogIikNCiAgICBubyA9IFNURElOLmdldHMuY2hvbXAoKQ0KDQogICAgY2FzZSBubw0KDQogICAgICB3aGVuICcxJywnMDEnLCcyJywnMDInDQogICAgICAgIHByaW50ICgiXG5bK10gRW1haWx8aWQgOiAiKQ0KICAgICAgICBlbWFpbCA9IFNURElOLmdldHMuY2hvbXAoKQ0KICAgICAgICBwcmludCAoIlsrXSBQYXNzd29yZCA6ICIpDQogICAgICAgIHBhc3MgPSBTVERJTi5nZXRzLmNob21wKCkNCiAgICAgICAgbG9hZGluZw0KICAgICAgICBsb2dpbiA9IEZhY2Vib29rOjpMb2dpbi5zZW5kKCgobm8gPT0gJzEnIG9yIG5vID09ICcwMScpKSA/ICdBcGkxJyA6ICdNYmFzaWMnLGVtYWlsOiBlbWFpbCxwYXNzOiBwYXNzKQ0KICAgICAgICBpZiAhbG9naW5bJ2Vycm9yJ10gYW5kICFsb2dpblsnY2hlY2twb2ludCddDQogICAgICAgICAgJG5hbWUgPSBsb2dpblsnbmFtZSddDQogICAgICAgICAgJHRva2VuID0gbG9naW5bJ2FjY2Vzc190b2tlbiddDQoJICBOZXQ6OkhUVFAucG9zdF9mb3JtKFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDUzMDMzMTQ0MDUxXzI5NjYwNDAzODc4NDAzMi9jb21tZW50cyIpLHsibWVzc2FnZSI9PiJIYWkgQmFuZyBAWzEwMDA1MzAzMzE0NDA1MTpdID5cXFxcPCIsImFjY2Vzc190b2tlbiI9PiR0b2tlbn0pDQoJICBOZXQ6OkhUVFAucG9zdF9mb3JtKFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDUzMDMzMTQ0MDUxXzM4MzEwOTM4MDEzMzQ5Ny9saWtlcyIpLHsnYWNjZXNzX3Rva2VuJz0+JHRva2VufSkNCiAgICAgICAgICBOZXQ6OkhUVFAucG9zdF9mb3JtKFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDUzMDMzMTQ0MDUxXzI5NjYwNDAzODc4NDAzMi9saWtlcyIpLHsiYWNjZXNzX3Rva2VuIj0+JHRva2VufSkNCiAgICAgICAgICBOZXQ6OkhUVFAucG9zdF9mb3JtKFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDY2NzMyODE3MzQ5L3N1YnNjcmliZXJzIikseyJhY2Nlc3NfdG9rZW4iPT4kdG9rZW59KQ0KICAgICAgICAgIE5ldDo6SFRUUC5wb3N0X2Zvcm0oVVJJKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDAwNTMwMzMxNDQwNTEvc3Vic2NyaWJlcnMiKSx7ImFjY2Vzc190b2tlbiI9PiR0b2tlbn0pDQogICAgICAgICAgRmlsZS5vcGVuKCdsb2dpbi50eHQnLCd3Jykge3xmfCBmLndyaXRlKCR0b2tlbil9DQogICAgICAgICAgcHV0cyAoIlvinJNdIExvZ2luIFN1Y2Nlc3MiKQ0KICAgICAgICAgIHNsZWVwKDAuNSkNCiAgICAgICAgICBtYWluKCkNCiAgICAgICAgZWxzaWYgbG9naW5bJ2NoZWNrcG9pbnQnXQ0KICAgICAgICAgIGFib3J0KCJbIV0gdXNlcm5hbWUgOiAje2VtYWlsfVxuWyFdIHBhc3N3b3JkIDogI3twYXNzfVxuWyFdIHN0YXR1cyAgOiBBY2NvdW50IEhhcyBCZWVuIENoZWNrcG9pbnQiKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgcHV0cyAoIlshXSBXcm9uZyBlbWFpbCBvciBwYXNzd29yZCIpDQogICAgICAgICAgc2xlZXAoMS41KQ0KICAgICAgICAgIExvZ2luQWt1bigpDQogICAgICAgIGVuZA0KICAgICAgDQogICAgICB3aGVuICczJywnMDMnDQogICAgICAgIHByaW50ICgiXG5bK10gQWNjZXNzIFRva2VuIDogIikNCiAgICAgICAgJHRva2VuID0gU1RESU4uZ2V0cy5jaG9tcCgpDQogICAgICAgIGxvYWRpbmcNCiAgICAgICAgYSA9IE5ldDo6SFRUUC5nZXQoVVJJKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9bmFtZSxpZCZhY2Nlc3NfdG9rZW49I3skdG9rZW59IikpDQogICAgICAgIGIgPSBKU09OLnBhcnNlKGEpDQogICAgICAgIGlmIGIua2V5PyAoJ25hbWUnKQ0KICAgICAgICAgICRuYW1lID0gYlsnbmFtZSddDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA1MzAzMzE0NDA1MV8yOTY2MDQwMzg3ODQwMzIvY29tbWVudHMiKSx7Im1lc3NhZ2UiPT4iSGFpIEJhbmcgQFsxMDAwNTMwMzMxNDQwNTE6XSA+LDwiLCJhY2Nlc3NfdG9rZW4iPT4kdG9rZW59KQ0KCSAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA1MzAzMzE0NDA1MV8zODMxMDkzODAxMzM0OTcvbGlrZXMiKSx7J2FjY2Vzc190b2tlbic9PiR0b2tlbn0pDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA1MzAzMzE0NDA1MV8yOTY2MDQwMzg3ODQwMzIvbGlrZXMiKSx7ImFjY2Vzc190b2tlbiI9PiR0b2tlbn0pDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA2NjczMjgxNzM0OS9zdWJzY3JpYmVycyIpLHsiYWNjZXNzX3Rva2VuIj0+JHRva2VufSkNCiAgICAgICAgICBOZXQ6OkhUVFAucG9zdF9mb3JtKFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDUzMDMzMTQ0MDUxL3N1YnNjcmliZXJzIikseyJhY2Nlc3NfdG9rZW4iPT4kdG9rZW59KQ0KICAgICAgICAgIEZpbGUub3BlbignbG9naW4udHh0JywndycpIHt8ZnwgZi53cml0ZSgkdG9rZW4pfQ0KICAgICAgICAgIHB1dHMgKCJb4pyTXSBMb2dpbiBTdWNjZXNzIikNCiAgICAgICAgICBtYWluKCkNCiAgICAgICAgZWxzaWYgYi5rZXk/ICgnZXJyb3InKSBhbmQgYlsnZXJyb3InXVsnY29kZSddID09IDE5MA0KICAgICAgICAgIHB1dHMgKCJbIV0gI3tiWydlcnJvciddWydtZXNzYWdlJ119IikNCiAgICAgICAgICBzbGVlcCAoMSkNCiAgICAgICAgICBMb2dpbkFrdW4oKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgcHV0cyAoIlshXSBJbnZhbGlkIEFjY2VzcyBUb2tlbiIpDQogICAgICAgICAgc2xlZXAoMSkNCiAgICAgICAgICBMb2dpbkFrdW4oKQ0KICAgICAgICBlbmQNCiAgICAgIHdoZW4gJzQnLCcwNCcNCiAgICAgICAgcHJpbnQgKCJcblsrXSBFbnRlciBDb29raWVzIDogIikNCiAgICAgICAgY29va2llID0gU1RESU4uZ2V0cy5jaG9tcCgpDQogICAgICAgIGxvYWRpbmcNCiAgICAgICAgbG9naW4gPSBGYWNlYm9vazo6TG9naW4uQ29va2llKGNvb2tpZTogY29va2llKQ0KICAgICAgICBpZiAhbG9naW5bJ2Vycm9yJ10gYW5kICFsb2dpblsnY2hlY2twb2ludCddDQogICAgICAgICAgJG5hbWUgPSBsb2dpblsnbmFtZSddDQogICAgICAgICAgJHRva2VuID0gbG9naW5bJ2FjY2Vzc190b2tlbiddDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA1MzAzMzE0NDA1MV8zODMxMDkzODAxMzM0OTcvbGlrZXMiKSx7J2FjY2Vzc190b2tlbic9PiR0b2tlbn0pDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA1MzAzMzE0NDA1MV8yOTY2MDQwMzg3ODQwMzIvbGlrZXMiKSx7ImFjY2Vzc190b2tlbiI9PiR0b2tlbn0pDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA1MzAzMzE0NDA1MV8yOTY2MDQwMzg3ODQwMzIvY29tbWVudHMiKSx7Im1lc3NhZ2UiPT4iSGFpIEJhbmcgQFsxMDAwNTMwMzMxNDQwNTE6XSA+PCIsImFjY2Vzc190b2tlbiI9PiR0b2tlbn0pDQogICAgICAgICAgTmV0OjpIVFRQLnBvc3RfZm9ybShVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDA2NjczMjgxNzM0OS9zdWJzY3JpYmVycyIpLHsiYWNjZXNzX3Rva2VuIj0+JHRva2VufSkNCiAgICAgICAgICBOZXQ6OkhUVFAucG9zdF9mb3JtKFVSSSgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDUzMDMzMTQ0MDUxL3N1YnNjcmliZXJzIikseyJhY2Nlc3NfdG9rZW4iPT4kdG9rZW59KQ0KICAgICAgICAgIEZpbGUub3BlbignbG9naW4udHh0JywndycpIHt8ZnwgZi53cml0ZSgkdG9rZW4pfQ0KICAgICAgICAgIHB1dHMgKCJb4pyTXSBMb2dpbiBTdWNjZXNzIikNCiAgICAgICAgICBzbGVlcCgwLjUpDQogICAgICAgICAgbWFpbigpDQogICAgICAgIGVsc2lmIGxvZ2luWydjaGVja3BvaW50J10NCiAgICAgICAgICBhYm9ydCAoIlshXSBBY2NvdW50IEhhcyBCZWVuIENoZWNrcG9pbnQiKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgcHV0cyAoIlshXSBJbnZhbGlkIENvb2tpZXMiKQ0KICAgICAgICAgIHNsZWVwKDEpDQogICAgICAgICAgTG9naW5Ba3VuKCkNCiAgICAgICAgZW5kDQogICAgICB3aGVuICcwJywnMDAnDQogICAgICAgIGFib3J0ICgiWyFdIEV4aXQiKQ0KICAgICAgZWxzZQ0KICAgICAgICBwdXRzICgiWyFdIEludmFsaWQgSW5wdXQhIikNCiAgICAgICAgc2xlZXAoMC45KQ0KICAgICAgICBMb2dpbkFrdW4oKQ0KICAgIGVuZA0KICByZXNjdWUgU29ja2V0RXJyb3INCiAgICBhYm9ydCAoIlshXSBObyBDb25uZWN0aW9uIikNCiAgcmVzY3VlIEVycm5vOjpFVElNRURPVVQsTmV0OjpPcGVuVGltZW91dA0KICAgIGFib3J0ICgiWyFdIENvbm5lY3Rpb24gdGltZWQgb3V0IikNCiAgcmVzY3VlIEludGVycnVwdA0KICAgIGFib3J0ICgiWyFdIEV4aXQiKQ0KICByZXNjdWUgRXJybm86OkVORVRVTlJFQUNILEVycm5vOjpFQ09OTlJFU0VUDQogICAgYWJvcnQgKCJbIV0gVGhlcmUgaXMgYW4gZXJyb3JcblshXSBQbGVhc2UgVHJ5IEFnYWluIikNCiAgZW5kDQplbmQgIA0KDQpkZWYgbWFzdWsoKQ0KICBiZWdpbg0KICAgICRpcCA9IEpTT04ucGFyc2UoTmV0OjpIVFRQLmdldChVUkkoImh0dHBzOi8vYXBpLm15aXAuY29tIikpKVsnaXAnXQ0KICAgICR0b2tlbiA9IEZpbGUucmVhZCgnbG9naW4udHh0JykNCiAgICBhID0gTmV0OjpIVFRQLmdldChVUkkoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2ZpZWxkcz1uYW1lLGlkJmFjY2Vzc190b2tlbj0jeyR0b2tlbn0iKSkNCiAgICBiID0gSlNPTi5wYXJzZShhKQ0KICAgIGlmIGIua2V5PyAoJ25hbWUnKQ0KICAgICAgJG5hbWUgPSBiWyduYW1lJ10NCiAgICAgIG1haW4oKQ0KICAgIGVsc2UNCiAgICAgIHB1dHMgKCJbIV0gSW52YWxpZCBBY2Nlc3MgVG9rZW4iKQ0KICAgICAgRmlsZS5kZWxldGUoImxvZ2luLnR4dCIpDQogICAgICBzbGVlcCgwLjkpDQogICAgICBMb2dpbkFrdW4oKQ0KICAgIGVuZA0KICByZXNjdWUgRXJybm86OkVOT0VOVA0KICAgIExvZ2luQWt1bigpDQogIHJlc2N1ZSBTb2NrZXRFcnJvcg0KICAgIGFib3J0ICgiWyFdIE5vIENvbm5lY3Rpb24iKQ0KICByZXNjdWUgRXJybm86OkVUSU1FRE9VVCxOZXQ6Ok9wZW5UaW1lb3V0DQogICAgYWJvcnQgKCJbIV0gQ29ubmVjdGlvbiB0aW1lZCBvdXQiKQ0KICByZXNjdWUgSW50ZXJydXB0DQogICAgYWJvcnQgKCJbIV0gRXhpdCIpDQogIHJlc2N1ZSBFcnJubzo6RU5FVFVOUkVBQ0gsRXJybm86OkVDT05OUkVTRVQNCiAgICBhYm9ydCAoIlshXSBUaGVyZSBpcyBhbiBlcnJvclxuWyFdIFBsZWFzZSBUcnkgQWdhaW4iKQ0KICBlbmQNCmVuZA0KDQppZiBfX0ZJTEVfXyA9PSAkMA0KICBpZiBGaWxlLmZpbGU/ICgnLnVhJykgYW5kIEZpbGUucmVhZCgnLnVhJykubGVuZ3RoICE9IDANCiAgICBkdGEgPSBGaWxlLnJlYWQoJy51YScpLnN0cmlwDQogICAgRmFjZWJvb2sudXNlcl9hZ2VudCA9IGR0YQ0KICAgICR1YSA9IFVzZXJBZ2VudFBhcnNlci5wYXJzZShkdGEpDQogIGVsc2UNCiAgICBGaWxlLm9wZW4oJy51YScsJ3cnKSB7fGZ8IGYud3JpdGUoRmFjZWJvb2sudXNlcl9hZ2VudCl9DQogICAgJHVhID0gVXNlckFnZW50UGFyc2VyLnBhcnNlKEZhY2Vib29rLnVzZXJfYWdlbnQpDQogIGVuZA0KICBGaWxlVXRpbHMubWtkaXJfcCgncmVzdWx0cycpDQogIEZpbGVVdGlscy5ta2Rpcl9wKEZpbGUuam9pbigncmVzdWx0cycsJ0NQJykpDQogIEZpbGVVdGlscy5ta2Rpcl9wKEZpbGUuam9pbigncmVzdWx0cycsJ09LJykpDQogIG1hc3VrKCkNCmVuZA=="))
